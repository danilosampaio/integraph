<html>
    <head>
        <link rel="stylesheet" href="main.css">
    </head>
    <script type="text/javascript" src="./main.js"></script>
    <script type="text/javascript" src="./integrations.js"></script>
    <script type="text/javascript" src="./diagram.js"></script>
    <body>
        <script type="module">
            import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
            import { minimalSetup, EditorView } from 'https://cdn.jsdelivr.net/npm/codemirror@6.0.1/+esm';
            window.__minimalSetup = minimalSetup;
            window.__EditorView = EditorView;

            initializeMermaid(mermaid);
            await mermaid.run();

            if (mermaid.contentLoaded){
                setupEdges(minimalSetup, EditorView);
            }
        </script>
        <div style="margin: 16px; border: solid hsl(240, 60%, 86.2745098039%) 1px; border-radius: 10px;">
            <div style="float:right; margin-right: 16px;">
                <ul style="list-style-type: none; display: flex;">
                    <li style="padding-left: 5px;">
                        <button title="Refresh" onclick="location.reload(false);">&circlearrowleft;</button>
                        <button title="Diagram" onclick="openDiagramSourceCode(window.__minimalSetup, window.__EditorView);">&#119628;</button>
                        <button title="Integrations" onclick="openIntegrations(window.__minimalSetup, window.__EditorView);">&#8633;</button>
                    </li>
                </ul>
            </div>
            <pre class="mermaid">
            
architecture-beta
        group parsers[Parsers]
    group diagrams[Diagrams]
        service integraphcli(logos:terminal)[integraph CLI]
    service typescriptparser(logos:typescript-icon)[Typescript Parser] in parsers
    service architecturediagram(ix:diagram-module)[Architecture Diagram] in diagrams
    service mermaid(vscode-icons:file-type-mermaid)[mermaid]
    service javaparser[Java Parser] in parsers
    service treesitter(logos:treehouse-icon)[tree_sitter]
    service pythonparser[Python Parser] in parsers
    service rustparser[Rust Parser] in parsers
        integraphcli:L -[integraphcli__typescriptparser]- R:typescriptparser{group}
    integraphcli:R -[integraphcli__architecturediagram]- L:architecturediagram
    architecturediagram:B -[architecturediagram__mermaid]- T:mermaid
    javaparser:R -[javaparser__treesitter]- B:treesitter
    pythonparser:R -[pythonparser__treesitter]- B:treesitter
    rustparser:R -[rustparser__treesitter]- B:treesitter
    typescriptparser:L -[typescriptparser__treesitter]- B:treesitter
            </pre>
            <dialog id="editorDialog">
                <form method="dialog">
                    <div class="editor"></div>
                    <button>Close</button>
                </form>
            </dialog>
        </div>
    </body>
</html>